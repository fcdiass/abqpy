

<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Example scripts that access data from an output database - abqpy 2021 文档</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_immaterial_theme.af531f03affe68837.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-codeautolink.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster.custom.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster.bundle.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-punk.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-noir.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-light.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/css/micromodal.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/autoclasstoc.css" />
        <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#finding-the-maximum-value-of-von-mises-stress" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../index.html" title="abqpy 2021 文档" class="md-header__button md-logo" aria-label="abqpy 2021 文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            abqpy 2021 文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Example scripts that access data from an output database
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="选择当前语言">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/abqpy/en/2021" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/abqpy/zh_CN/2021" hreflang="zh_CN" class="md-select__link">
                    简体中文
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/haiiliin/abqpy/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    abqpy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../getting_started.html" class="md-tabs__link">
      <span class="md-ellipsis">用户手册</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../tutorials.html" class="md-tabs__link">
      <span class="md-ellipsis">教程 &amp; 案例</span>
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="../../index.html" class="md-tabs__link md-tabs__link--active">
      <span class="md-ellipsis">参考</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../policy.html" class="md-tabs__link">
      <span class="md-ellipsis">策略与许可</span>
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="abqpy 2021 文档" class="md-nav__button md-logo" aria-label="abqpy 2021 文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    abqpy 2021 文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/haiiliin/abqpy/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    abqpy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_1">
          <span class="md-ellipsis">用户手册</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="用户手册" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">用户手册</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started.html" class="md-nav__link">
        <span class="md-ellipsis">入门指南</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../envvars.html" class="md-nav__link">
        <span class="md-ellipsis">环境变量</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cli.html" class="md-nav__link">
        <span class="md-ellipsis">命令行接口</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2">
          <span class="md-ellipsis">教程 &amp; 案例</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="教程 &amp; 案例" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">教程 &amp; 案例</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials.html" class="md-nav__link">
        <span class="md-ellipsis">教程</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/index.html" class="md-nav__link">
        <span class="md-ellipsis">示例</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3">
          <span class="md-ellipsis">参考</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="参考" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">参考</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../index.html"><span class="md-ellipsis">Abaqus Scripting User’s Guide</span></a>
          
            <label for="__nav_3_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Abaqus Scripting User’s Guide" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Abaqus Scripting User’s Guide</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/index.html" class="md-nav__link">
        <span class="md-ellipsis">About the Abaqus Scripting Interface</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/index.html" class="md-nav__link">
        <span class="md-ellipsis">Using the Abaqus Scripting Interface</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/index.html" class="md-nav__link">
        <span class="md-ellipsis">The Abaqus Python Development Environment</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/index.html" class="md-nav__link">
        <span class="md-ellipsis">Putting it all Together:<wbr> Abaqus Scripting Interface Examples</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_5" type="checkbox" id="__nav_3_1_5" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../index.html"><span class="md-ellipsis">Accessing an Output Database</span></a>
          
            <label for="__nav_3_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Accessing an Output Database" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_5">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Accessing an Output Database</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_5_1" type="checkbox" id="__nav_3_1_5_1" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html"><span class="md-ellipsis">Using the Abaqus Scripting Interface to access an output database</span></a>
          
            <label for="__nav_3_1_5_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Using the Abaqus Scripting Interface to access an output database" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_5_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Using the Abaqus Scripting Interface to access an output database</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="need-what-to-understand.html" class="md-nav__link">
        <span class="md-ellipsis">What do you need to access the output database?</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="object-model.html" class="md-nav__link">
        <span class="md-ellipsis">How the object model for the output database relates to commands</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="output-object-model.html" class="md-nav__link">
        <span class="md-ellipsis">Object model for the output database</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="execute-script.html" class="md-nav__link">
        <span class="md-ellipsis">Executing a script that accesses an output database</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="read.html" class="md-nav__link">
        <span class="md-ellipsis">Reading from an output database</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="write.html" class="md-nav__link">
        <span class="md-ellipsis">Writing to an output database</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="exceptions.html" class="md-nav__link">
        <span class="md-ellipsis">Exception handling in an output database</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="computations.html" class="md-nav__link">
        <span class="md-ellipsis">Computations with Abaqus results</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="improve-efficiency.html" class="md-nav__link">
        <span class="md-ellipsis">Improving the efficiency of your scripts</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Example scripts that access data from an output database</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Example scripts that access data from an output database</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Example scripts that access data from an output database</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#finding-the-maximum-value-of-von-mises-stress" class="md-nav__link">
    <span class="md-ellipsis">Finding the maximum value of von Mises stress</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-output-database" class="md-nav__link">
    <span title="creating-an-output-database (引用标签)" class="md-ellipsis">Creating an output database</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-abaqus-scripting-interface-version-of-fpert" class="md-nav__link">
    <span class="md-ellipsis">An Abaqus Scripting Interface version of FPERT</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computations-with-fieldoutput-objects" class="md-nav__link">
    <span title="computations-with-fieldoutput-objects (引用标签)" class="md-ellipsis">Computations with Field<wbr>Output objects</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computations-with-fieldvalue-objects" class="md-nav__link">
    <span class="md-ellipsis">Computations with Field<wbr>Value objects</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computations-with-historyoutput-objects" class="md-nav__link">
    <span class="md-ellipsis">Computations with History<wbr>Output objects</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-load-combination-from-different-load-cases" class="md-nav__link">
    <span class="md-ellipsis">Creating a new load combination from different load cases</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stress-range-for-multiple-load-cases" class="md-nav__link">
    <span class="md-ellipsis">Stress range for multiple load cases</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformation-of-field-results" class="md-nav__link">
    <span title="transformation-of-field-results (引用标签)" class="md-ellipsis">Transformation of field results</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewing-the-analysis-of-a-meshed-beam-cross-section" class="md-nav__link">
    <span class="md-ellipsis">Viewing the analysis of a meshed beam cross-<wbr>section</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-infinite-elements-to-compute-and-view-the-results-of-an-acoustic-far-field-analysis" class="md-nav__link">
    <span class="md-ellipsis">Using infinite elements to compute and view the results of an acoustic far-<wbr>field analysis</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-abaqus-scripting-interface-version-of-felbow" class="md-nav__link">
    <span class="md-ellipsis">An Abaqus Scripting Interface version of FELBOW</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpp/index.html" class="md-nav__link">
        <span class="md-ellipsis">Using C++ to access an output database</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/index.html" class="md-nav__link">
        <span class="md-ellipsis">Abaqus Class References</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CHANGES.html" class="md-nav__link">
        <span class="md-ellipsis">Abaqus API Changes</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../autoapi/index.html" class="md-nav__link">
        <span class="md-ellipsis">Abqpy API 参考文档</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../localization.html" class="md-nav__link">
        <span class="md-ellipsis">文档本地化</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4">
          <span class="md-ellipsis">策略与许可</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="策略与许可" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">策略与许可</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../policy.html" class="md-nav__link">
        <span class="md-ellipsis">评论策略</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Example scripts that access data from an output database</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#finding-the-maximum-value-of-von-mises-stress" class="md-nav__link">
    <span class="md-ellipsis">Finding the maximum value of von Mises stress</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-output-database" class="md-nav__link">
    <span title="creating-an-output-database (引用标签)" class="md-ellipsis">Creating an output database</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-abaqus-scripting-interface-version-of-fpert" class="md-nav__link">
    <span class="md-ellipsis">An Abaqus Scripting Interface version of FPERT</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computations-with-fieldoutput-objects" class="md-nav__link">
    <span title="computations-with-fieldoutput-objects (引用标签)" class="md-ellipsis">Computations with Field<wbr>Output objects</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computations-with-fieldvalue-objects" class="md-nav__link">
    <span class="md-ellipsis">Computations with Field<wbr>Value objects</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computations-with-historyoutput-objects" class="md-nav__link">
    <span class="md-ellipsis">Computations with History<wbr>Output objects</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-load-combination-from-different-load-cases" class="md-nav__link">
    <span class="md-ellipsis">Creating a new load combination from different load cases</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stress-range-for-multiple-load-cases" class="md-nav__link">
    <span class="md-ellipsis">Stress range for multiple load cases</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformation-of-field-results" class="md-nav__link">
    <span title="transformation-of-field-results (引用标签)" class="md-ellipsis">Transformation of field results</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewing-the-analysis-of-a-meshed-beam-cross-section" class="md-nav__link">
    <span class="md-ellipsis">Viewing the analysis of a meshed beam cross-<wbr>section</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-infinite-elements-to-compute-and-view-the-results-of-an-acoustic-far-field-analysis" class="md-nav__link">
    <span class="md-ellipsis">Using infinite elements to compute and view the results of an acoustic far-<wbr>field analysis</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-abaqus-scripting-interface-version-of-felbow" class="md-nav__link">
    <span class="md-ellipsis">An Abaqus Scripting Interface version of FELBOW</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/haiiliin/abqpy/edit/2021/docs/source/user/output/python/examples.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
  </a>

<h1 id="example-scripts-that-access-data-from-an-output-database">Example scripts that access data from an output database<a class="headerlink" href="#example-scripts-that-access-data-from-an-output-database" title="此标题的永久链接">¶</a></h1>
<p>The following examples illustrate how you use the output database commands to access data from an output database.</p>
<p>In addition, the Abaqus Scripting Interface examples, <a class="reference internal" href="../../about/examples/read-output.html"><span class="doc">Reading from an output database</span></a> and <a class="reference internal" href="../../examples/index.html"><span class="doc">Putting it all Together: Abaqus Scripting Interface Examples</span></a> illustrate how to read data from an output database.</p>
<h2 id="finding-the-maximum-value-of-von-mises-stress">Finding the maximum value of von Mises stress<a class="headerlink" href="#finding-the-maximum-value-of-von-mises-stress" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can iterate through an output database and search for the maximum value of von Mises stress. The script opens the output database specified by the first argument on the command line and iterates through the following:</p>
<ul class="simple">
<li><p>Each step.</p></li>
<li><p>Each frame in each step.</p></li>
<li><p>Each value of von Mises stress in each frame.</p></li>
</ul>
<p>In addition, you can supply an optional assembly element set argument from the command line, in which case the script searches only the element set for the maximum value of von Mises stress.</p>
<p>The following illustrates how you can run the example script from the system prompt. The script will search the element set ALL ELEMENTS in the viewer tutorial output database for the maximum value of von Mises stress:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>python<span class="w"> </span>odbMaxMises.py<span class="w"> </span>-odb<span class="w"> </span>viewer_tutorial.odb
<span class="w">    </span>-elset<span class="w"> </span><span class="s2">&quot;ALL ELEMENTS&quot;</span>
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">备注</p>
<p>If a command line argument is a String that contains spaces, some systems will interpret the String correctly only if it is enclosed in double quotation marks. For example, <code class="docutils literal notranslate"><span class="pre">&quot;ALL</span> <span class="pre">ELEMENTS&quot;</span></code>.</p>
</div>
<p>You can also run the example with only the <strong>-help</strong> parameter for a summary of the usage.</p>
<p>Use the following commands to retrieve the example script and the viewer tutorial output database:</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># abaqus fetch job=odbMaxMises.py</span>
<span class="c1"># abaqus fetch job=viewer_tutorial</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">odbMaxMises.py</span>
<span class="sd">Code to determine the location and value of the maximum</span>
<span class="sd">von-mises stress in an output database.</span>
<span class="sd">Usage: abaqus python odbMaxMises.py -odb odbName</span>
<span class="sd">    -elset(optional) elsetName</span>
<span class="sd">Requirements:</span>
<span class="sd">1. -odb   : Name of the output database.</span>
<span class="sd">2. -elset : Name of the assembly level element set.</span>
<span class="sd">            Search will be done only for element belonging</span>
<span class="sd">            to this set. If this parameter is not provided,</span>
<span class="sd">            search will be performed over the entire model.</span>
<span class="sd">3. -help  : Print usage</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">argv</span><span class="p">,</span><span class="nb">exit</span>
<span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>

<span class="k">def</span> <span class="nf">rightTrim</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span><span class="n">suffix</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="nb">input</span> <span class="o">+</span> <span class="n">suffix</span>
    <span class="k">return</span> <span class="nb">input</span>
<span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>

<span class="k">def</span> <span class="nf">getMaxMises</span><span class="p">(</span><span class="n">odbName</span><span class="p">,</span><span class="n">elsetName</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Print max mises location and value given odbName</span>
<span class="sd">        and elset(optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">elset</span> <span class="o">=</span> <span class="n">elemset</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">region</span> <span class="o">=</span> <span class="s2">&quot;over the entire model&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Open the output database &quot;&quot;&quot;</span>
    <span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">odbName</span><span class="p">)</span>
    <span class="n">assembly</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">rootAssembly</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Check to see if the element set exists</span>
<span class="sd">        in the assembly</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">elsetName</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">elemset</span> <span class="o">=</span> <span class="n">assembly</span><span class="o">.</span><span class="n">elementSets</span><span class="p">[</span><span class="n">elsetName</span><span class="p">]</span>
            <span class="n">region</span> <span class="o">=</span> <span class="s2">&quot; in the element set : &quot;</span> <span class="o">+</span> <span class="n">elsetName</span><span class="p">;</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">print</span> <span class="s1">&#39;An assembly level elset named </span><span class="si">%s</span><span class="s1"> does&#39;</span>
                <span class="s1">&#39;not exist in the output database </span><span class="si">%s</span><span class="s1">&#39;</span> \
                <span class="o">%</span> <span class="p">(</span><span class="n">elsetName</span><span class="p">,</span> <span class="n">odbName</span><span class="p">)</span>
            <span class="n">odb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Initialize maximum values &quot;&quot;&quot;</span>
    <span class="n">maxMises</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span>
    <span class="n">maxElem</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">maxStep</span> <span class="o">=</span> <span class="s2">&quot;_None_&quot;</span>
    <span class="n">maxFrame</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">Stress</span> <span class="o">=</span> <span class="s1">&#39;S&#39;</span>
    <span class="n">isStressPresent</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">print</span> <span class="s1">&#39;Processing Step:&#39;</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">name</span>
        <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">frames</span><span class="p">:</span>
            <span class="n">allFields</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">fieldOutputs</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">allFields</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">Stress</span><span class="p">)):</span>
                <span class="n">isStressPresent</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">stressSet</span> <span class="o">=</span> <span class="n">allFields</span><span class="p">[</span><span class="n">Stress</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">elemset</span><span class="p">:</span>
                    <span class="n">stressSet</span> <span class="o">=</span> <span class="n">stressSet</span><span class="o">.</span><span class="n">getSubset</span><span class="p">(</span>
                        <span class="n">region</span><span class="o">=</span><span class="n">elemset</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">stressValue</span> <span class="ow">in</span> <span class="n">stressSet</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">stressValue</span><span class="o">.</span><span class="n">mises</span> <span class="o">&gt;</span> <span class="n">maxMises</span><span class="p">):</span>
                        <span class="n">maxMises</span> <span class="o">=</span> <span class="n">stressValue</span><span class="o">.</span><span class="n">mises</span>
                        <span class="n">maxElem</span> <span class="o">=</span> <span class="n">stressValue</span><span class="o">.</span><span class="n">elementLabel</span>
                        <span class="n">maxStep</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">name</span>
                        <span class="n">maxFrame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">incrementNumber</span>
    <span class="k">if</span><span class="p">(</span><span class="n">isStressPresent</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;Maximum von Mises stress </span><span class="si">%s</span><span class="s1"> is </span><span class="si">%f</span><span class="s1"> in element </span><span class="si">%d</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span>
            <span class="n">region</span><span class="p">,</span> <span class="n">maxMises</span><span class="p">,</span> <span class="n">maxElem</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;Location: frame # </span><span class="si">%d</span><span class="s1">  step:  </span><span class="si">%s</span><span class="s1"> &#39;</span><span class="o">%</span><span class="p">(</span><span class="n">maxFrame</span><span class="p">,</span><span class="n">maxStep</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s1">&#39;Stress output is not available in&#39;</span> \
            <span class="s1">&#39;the output database : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">odb</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Close the output database before exiting the program &quot;&quot;&quot;</span>
    <span class="n">odb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1">#==================================================================</span>
<span class="c1"># S T A R T</span>
<span class="c1">#</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">odbName</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">elsetName</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">argList</span> <span class="o">=</span> <span class="n">argv</span>
    <span class="n">argc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">argList</span><span class="p">)</span>
    <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">argList</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-o&quot;</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">argList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">odbName</span> <span class="o">=</span> <span class="n">rightTrim</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;.odb&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">argList</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-e&quot;</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">elsetName</span> <span class="o">=</span> <span class="n">argList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">argList</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;-h&quot;</span><span class="p">):</span>
            <span class="k">print</span> <span class="vm">__doc__</span>
            <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">odbName</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39; **ERROR** output database name is not provided&#39;</span>
        <span class="k">print</span> <span class="vm">__doc__</span>
        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">getMaxMises</span><span class="p">(</span><span class="n">odbName</span><span class="p">,</span><span class="n">elsetName</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="creating-an-output-database"><span id="id1"></span>Creating an output database<a class="headerlink" href="#creating-an-output-database" title="此标题的永久链接">¶</a></h2>
<p>The following example illustrates how you can use the Abaqus Scripting Interface commands to do the following:</p>
<ol class="arabic simple">
<li><p>Create a new output database.</p></li>
<li><p>Add model data.</p></li>
<li><p>Add field data.</p></li>
<li><p>Add history data.</p></li>
<li><p>Read history data.</p></li>
<li><p>Save the output database.</p></li>
</ol>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="n">abaqus</span> <span class="n">fetch</span> <span class="n">job</span><span class="o">=</span><span class="n">odbWrite</span>
<span class="sd">&quot;&quot;&quot;odbWrite.py</span>
<span class="sd">Script to create an output database and add model,</span>
<span class="sd">field, and history data. The script also reads</span>
<span class="sd">history data, performs an operation on the data, and writes</span>
<span class="sd">the result back to the output database.</span>
<span class="sd">usage: abaqus python odbWrite.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">odbMaterial</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">odbSection</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">abaqusConstants</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">createODB</span><span class="p">():</span>

    <span class="c1"># Create an ODB (which also creates the rootAssembly)</span>
    <span class="n">odb</span> <span class="o">=</span> <span class="n">Odb</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;simpleModel&#39;</span><span class="p">,</span>
        <span class="n">analysisTitle</span><span class="o">=</span><span class="s1">&#39;ODB created with Python ODB API&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;example illustrating Python ODB API &#39;</span><span class="p">,</span>
        <span class="n">path</span><span class="o">=</span><span class="s1">&#39;odbWritePython.odb&#39;</span><span class="p">)</span>

    <span class="c1"># create few materials</span>
    <span class="n">materialName</span> <span class="o">=</span> <span class="s2">&quot;Elastic Material&quot;</span>
    <span class="n">material_1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">materialName</span><span class="p">)</span>
    <span class="n">material_1</span><span class="o">.</span><span class="n">Elastic</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">ISOTROPIC</span><span class="p">,</span>
        <span class="n">temperatureDependency</span><span class="o">=</span><span class="n">OFF</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">noCompression</span><span class="o">=</span><span class="n">OFF</span><span class="p">,</span> <span class="n">noTension</span><span class="o">=</span><span class="n">OFF</span><span class="p">,</span>
        <span class="n">moduli</span><span class="o">=</span><span class="n">LONG_TERM</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="p">((</span><span class="mi">12000</span><span class="p">,</span><span class="mf">0.3</span><span class="p">),))</span>

    <span class="c1"># create few sections</span>
    <span class="n">sectionName</span> <span class="o">=</span> <span class="s1">&#39;Homogeneous Shell Section&#39;</span>
    <span class="n">section_1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">HomogeneousShellSection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">sectionName</span><span class="p">,</span>
        <span class="n">material</span><span class="o">=</span><span class="n">materialName</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
    <span class="c1">#  Model data:</span>

    <span class="c1"># Set up the section categories.</span>
    <span class="n">sCat</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">SectionCategory</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;S5&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Five-Layered Shell&#39;</span><span class="p">)</span>
    <span class="n">spBot</span> <span class="o">=</span> <span class="n">sCat</span><span class="o">.</span><span class="n">SectionPoint</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Bottom&#39;</span><span class="p">)</span>
    <span class="n">spMid</span> <span class="o">=</span> <span class="n">sCat</span><span class="o">.</span><span class="n">SectionPoint</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Middle&#39;</span><span class="p">)</span>
    <span class="n">spTop</span> <span class="o">=</span> <span class="n">sCat</span><span class="o">.</span><span class="n">SectionPoint</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Top&#39;</span><span class="p">)</span>

    <span class="c1">#  Create a 2-element shell model,</span>
    <span class="c1">#  4 integration points, 5 section points.</span>

    <span class="n">part1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;part-1&#39;</span><span class="p">,</span> <span class="n">embeddedSpace</span><span class="o">=</span><span class="n">THREE_D</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">DEFORMABLE_BODY</span><span class="p">)</span>
    <span class="n">nodeData</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">part1</span><span class="o">.</span><span class="n">addNodes</span><span class="p">(</span><span class="n">nodeData</span><span class="o">=</span><span class="n">nodeData</span><span class="p">,</span>
        <span class="n">nodeSetName</span><span class="o">=</span><span class="s1">&#39;nset-1&#39;</span><span class="p">)</span>

    <span class="n">elementData</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">part1</span><span class="o">.</span><span class="n">addElements</span><span class="p">(</span><span class="n">elementData</span><span class="o">=</span><span class="n">elementData</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;S4&#39;</span><span class="p">,</span>
        <span class="n">elementSetName</span><span class="o">=</span><span class="s1">&#39;eset-1&#39;</span><span class="p">,</span> <span class="n">sectionCategory</span><span class="o">=</span><span class="n">sCat</span><span class="p">)</span>

    <span class="c1">#  Instance the part.</span>
    <span class="n">instance1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">rootAssembly</span><span class="o">.</span><span class="n">Instance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;part-1-1&#39;</span><span class="p">,</span>
        <span class="nb">object</span><span class="o">=</span><span class="n">part1</span><span class="p">)</span>
    <span class="c1"># create instance level sets for section assignment</span>
    <span class="n">elLabels</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">elset_1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">rootAssembly</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="s1">&#39;part-1-1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ElementSetFromElementLabels</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">materialName</span><span class="p">,</span> <span class="n">elementLabels</span><span class="o">=</span><span class="n">elLabels</span><span class="p">)</span>
    <span class="n">instance1</span><span class="o">.</span><span class="n">assignSection</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">elset_1</span><span class="p">,</span> <span class="n">section</span><span class="o">=</span><span class="n">section_1</span><span class="p">)</span>

    <span class="c1">#  Field data:</span>

    <span class="c1">#  Create a step and a frame.</span>

    <span class="n">step1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">Step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;step-1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;first analysis step&#39;</span><span class="p">,</span>
        <span class="n">domain</span><span class="o">=</span><span class="n">TIME</span><span class="p">,</span> <span class="n">timePeriod</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">analysisTime</span><span class="o">=</span><span class="mf">0.1</span>
    <span class="n">frame1</span> <span class="o">=</span> <span class="n">step1</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">incrementNumber</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">frameValue</span><span class="o">=</span><span class="n">analysisTime</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span>\
            <span class="s1">&#39;results frame for time &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">analysisTime</span><span class="p">))</span>


    <span class="c1">#  Write nodal displacements.</span>

    <span class="n">uField</span> <span class="o">=</span> <span class="n">frame1</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;U&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Displacements&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">VECTOR</span><span class="p">)</span>

    <span class="n">nodeLabelData</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="n">dispData</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">18</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="n">uField</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">NODAL</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="n">instance1</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">nodeLabelData</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">dispData</span><span class="p">)</span>

    <span class="c1">#  Make this the default deformed field for visualization.</span>

    <span class="n">step1</span><span class="o">.</span><span class="n">setDefaultDeformedField</span><span class="p">(</span><span class="n">uField</span><span class="p">)</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Write stress tensors</span>
<span class="sd">    (output only available at top/bottom section points)</span>
<span class="sd">    The element defined above (S4) has 4 integration points.</span>
<span class="sd">    Hence, there are 4 stress tensors per element.</span>
<span class="sd">    Each Field constructor refers to only one layer of section</span>
<span class="sd">    points.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">elementLabelData</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">topData</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">bottomData</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="n">transform</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="n">sField</span> <span class="o">=</span> <span class="n">frame1</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Stress&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">TENSOR_3D_PLANAR</span><span class="p">,</span>
        <span class="n">componentLabels</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;S11&#39;</span><span class="p">,</span> <span class="s1">&#39;S22&#39;</span><span class="p">,</span> <span class="s1">&#39;S33&#39;</span><span class="p">,</span><span class="s1">&#39;S12&#39;</span><span class="p">),</span>
        <span class="n">validInvariants</span><span class="o">=</span><span class="p">(</span><span class="n">MISES</span><span class="p">,))</span>
    <span class="n">sField</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">INTEGRATION_POINT</span><span class="p">,</span>
    <span class="n">sectionPoint</span><span class="o">=</span><span class="n">spTop</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="n">instance1</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">elementLabelData</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">topData</span><span class="p">,</span>
    <span class="n">localCoordSystem</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>
    <span class="n">sField</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">INTEGRATION_POINT</span><span class="p">,</span>
        <span class="n">sectionPoint</span><span class="o">=</span><span class="n">spBot</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="n">instance1</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">elementLabelData</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">bottomData</span><span class="p">,</span>
        <span class="n">localCoordSystem</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>

    <span class="c1">#  For this step, make this the default field</span>
    <span class="c1">#  for visualization.</span>

    <span class="n">step1</span><span class="o">.</span><span class="n">setDefaultField</span><span class="p">(</span><span class="n">sField</span><span class="p">)</span>

    <span class="c1">#  History data:</span>

    <span class="c1">#  Create a HistoryRegion for a specific point.</span>

    <span class="n">hRegionStep1</span> <span class="o">=</span> <span class="n">step1</span><span class="o">.</span><span class="n">HistoryRegion</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;historyNode0&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Displacement and reaction force&#39;</span><span class="p">,</span>
        <span class="n">point</span><span class="o">=</span><span class="n">instance1</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c1">#  Create variables for this history output in step1.</span>

    <span class="n">hOutputStep1U1</span> <span class="o">=</span> <span class="n">hRegionStep1</span><span class="o">.</span><span class="n">HistoryOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;U1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Displacement&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">SCALAR</span><span class="p">)</span>
    <span class="n">hOutputStep1Rf1</span> <span class="o">=</span> <span class="n">hRegionStep1</span><span class="o">.</span><span class="n">HistoryOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;RF1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Reaction Force&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">SCALAR</span><span class="p">)</span>

    <span class="c1">#  Add history data for step1.</span>

    <span class="n">timeData1</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">u1Data</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="n">rf1Data</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>

    <span class="n">hOutputStep1U1</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">frameValue</span><span class="o">=</span><span class="n">timeData1</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">u1Data</span><span class="p">)</span>
    <span class="n">hOutputStep1Rf1</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">frameValue</span><span class="o">=</span><span class="n">timeData1</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">rf1Data</span><span class="p">)</span>

    <span class="c1">#  Create another step for history data.</span>
    <span class="n">step2</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">Step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;step-2&#39;</span><span class="p">,</span>  <span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">domain</span><span class="o">=</span><span class="n">TIME</span><span class="p">,</span> <span class="n">timePeriod</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">hRegionStep2</span> <span class="o">=</span> <span class="n">step2</span><span class="o">.</span><span class="n">HistoryRegion</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;historyNode0&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Displacement and reaction force&#39;</span><span class="p">,</span>
        <span class="n">point</span><span class="o">=</span><span class="n">instance1</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">hOutputStep2U1</span> <span class="o">=</span> <span class="n">hRegionStep2</span><span class="o">.</span><span class="n">HistoryOutput</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;U1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Displacement&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">SCALAR</span><span class="p">)</span>
    <span class="n">hOutputStep2Rf1</span> <span class="o">=</span> <span class="n">hRegionStep2</span><span class="o">.</span><span class="n">HistoryOutput</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;RF1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Reaction Force&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">SCALAR</span><span class="p">)</span>

    <span class="c1">#  Add history data for the second step.</span>
    <span class="n">timeData2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">)</span>
    <span class="n">u1Data</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>
    <span class="n">rf1Data</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

    <span class="n">hOutputStep2U1</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">frameValue</span><span class="o">=</span><span class="n">timeData2</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">u1Data</span><span class="p">)</span>
    <span class="n">hOutputStep2Rf1</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">frameValue</span><span class="o">=</span><span class="n">timeData2</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">rf1Data</span><span class="p">)</span>

    <span class="c1"># Get XY Data from the two steps.</span>
    <span class="n">u1FromStep1</span> <span class="o">=</span> <span class="n">hRegionStep1</span><span class="o">.</span><span class="n">getSubset</span><span class="p">(</span><span class="n">variableName</span><span class="o">=</span><span class="s1">&#39;U1&#39;</span><span class="p">)</span>
    <span class="n">u1FromStep2</span> <span class="o">=</span> <span class="n">hRegionStep2</span><span class="o">.</span><span class="n">getSubset</span><span class="p">(</span><span class="n">variableName</span><span class="o">=</span><span class="s1">&#39;U1&#39;</span><span class="p">)</span>

    <span class="c1"># Square the history data.</span>
    <span class="n">u1SquaredFromStep1</span> <span class="o">=</span> \
        <span class="n">power</span><span class="p">(</span><span class="n">u1FromStep1</span><span class="o">.</span><span class="n">historyOutputs</span><span class="p">[</span><span class="s1">&#39;U1&#39;</span><span class="p">],</span> <span class="mf">2.0</span><span class="p">)</span>
    <span class="n">u1SquaredFromStep2</span> <span class="o">=</span> \
        <span class="n">power</span><span class="p">(</span><span class="n">u1FromStep2</span><span class="o">.</span><span class="n">historyOutputs</span><span class="p">[</span><span class="s1">&#39;U1&#39;</span><span class="p">],</span> <span class="mf">2.0</span><span class="p">)</span>

    <span class="c1"># Add the squared displacement to the two steps.</span>
    <span class="n">hOutputStep1sumU1</span> <span class="o">=</span> <span class="n">hRegionStep1</span><span class="o">.</span><span class="n">HistoryOutput</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;squareU1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Square of displacements&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">SCALAR</span><span class="p">)</span>
    <span class="n">hOutputStep1sumU1</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">u1SquaredFromStep1</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="n">hOutputStep2sumU1</span> <span class="o">=</span> <span class="n">hRegionStep2</span><span class="o">.</span><span class="n">HistoryOutput</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;squareU1&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Square of displacements&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">SCALAR</span><span class="p">)</span>
    <span class="n">hOutputStep2sumU1</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">u1SquaredFromStep2</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Save the results in the output database.</span>
    <span class="c1"># Use the Visualization module of Abaqus/CAE to</span>
    <span class="c1"># view the contents of the output database.</span>

    <span class="n">odb</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="n">odb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">createODB</span><span class="p">()</span>
</code></pre></div>
</div>
<h2 id="an-abaqus-scripting-interface-version-of-fpert">An Abaqus Scripting Interface version of FPERT<a class="headerlink" href="#an-abaqus-scripting-interface-version-of-fpert" title="此标题的永久链接">¶</a></h2>
<p>A Fortran program that reads the Abaqus results file and creates a deformed mesh from the original coordinate data and eigenvectors is described in <a class="reference external" href="https://help.3ds.com/2021/English/DSSIMULIA_Established/SIMACAEEXARefMap/simaexa-c-fpert.htm?contextscope=all">Creation of a perturbed mesh from original coordinate data and eigenvectors: FPERT</a>. This example illustrates an Abaqus Scripting Interface script that reads an output database and performs similar calculations.</p>
<p>The command line arguments provide the following:</p>
<ul class="simple">
<li><p><strong>odbName</strong>: The output database file name.</p></li>
<li><p><strong>modeList</strong>: A list of eigenmodes to use in the perturbation.</p></li>
<li><p><strong>weightList</strong>: The perturbation weighting factors.</p></li>
<li><p><strong>outNameUser</strong>: The output file name (optional).</p></li>
</ul>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># abaqus fetch job=odbPert</span>

<span class="c1"># Abaqus Scripting Interface version of FPERT, a Fortran</span>
<span class="c1"># program to create a perturbed mesh from original coordinate</span>
<span class="c1"># data and eigenvectors. FPERT is described in the Abaqus Example</span>
<span class="c1"># Problems Manual.</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">IntType</span>

<span class="c1"># Get input from the user</span>

<span class="n">odbName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter odb name (w/o .odb): &#39;</span><span class="p">)</span>
<span class="n">modes</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter mode shape(s): &#39;</span><span class="p">))</span>
<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">modes</span><span class="p">)</span> <span class="ow">is</span> <span class="n">IntType</span><span class="p">:</span>
    <span class="n">modes</span> <span class="o">=</span> <span class="p">(</span><span class="n">modes</span><span class="p">,)</span>

<span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">odbName</span> <span class="o">+</span> <span class="s1">&#39;.odb&#39;</span><span class="p">)</span>

<span class="c1"># Get the undeformed coordinates from the first</span>
<span class="c1"># step and frame</span>

<span class="n">step</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
<span class="n">coords</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;COORD&#39;</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
<span class="n">err</span> <span class="o">=</span> <span class="s2">&quot;The analysis must include a field output request </span><span class="se">\</span>
<span class="s2">    for variable COORD.&quot;</span>
<span class="k">print</span> <span class="n">err</span>
<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Perturb the nodal coordinates</span>

<span class="n">factors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">modes</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;Input error: mode </span><span class="si">%s</span><span class="s1"> does not exist&#39;</span> <span class="o">%</span> <span class="n">mode</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span>
        <span class="s1">&#39;Enter imperfection factor for mode </span><span class="si">%s</span><span class="s1">: &#39;</span><span class="o">%</span> <span class="n">mode</span><span class="p">)))</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span> <span class="o">+</span> <span class="n">factors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">frame</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;U&#39;</span><span class="p">]</span>

<span class="c1"># Write new nodal coordinates to a file</span>

<span class="n">outFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">odbName</span> <span class="o">+</span> <span class="s1">&#39;_perturbed.inp&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">header</span> <span class="o">=</span> \
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">*******************************************************</span>
<span class="sd">** Node data for perturbed mesh.</span>
<span class="sd">** Input mesh from: %s</span>
<span class="sd">** Mode shapes used: %s</span>
<span class="sd">** Imperfection factors used: %s</span>
<span class="sd">*******************************************************</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">header</span> <span class="o">%</span> <span class="p">(</span><span class="n">odbName</span><span class="p">,</span> <span class="n">modes</span><span class="p">,</span> <span class="n">factors</span><span class="p">))</span>
<span class="n">format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%6i</span><span class="s1">, </span><span class="si">%14.7e</span><span class="s1">, </span><span class="si">%14.7e</span><span class="s1">, </span><span class="si">%14.7e</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">coords</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
    <span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
        <span class="n">format</span> <span class="o">%</span> <span class="p">((</span><span class="n">value</span><span class="o">.</span><span class="n">nodeLabel</span><span class="p">,)</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">data</span><span class="p">)))</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;** End of perturbed mesh node input file.&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
</div>
<h2 id="computations-with-fieldoutput-objects"><span id="id2"></span>Computations with FieldOutput objects<a class="headerlink" href="#computations-with-fieldoutput-objects" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can operate on FieldOutput objects and save the computed field to the output database. The example script does the following:</p>
<p>Retrieves two specified fields from the output database.</p>
<ul class="simple">
<li><p>Computes a new field by subtracting the fields that were retrieved.</p></li>
<li><p>Creates a new Step object in the output database.</p></li>
<li><p>Creates a new Frame object in the new step.</p></li>
<li><p>Creates a new FieldOutput object in the new frame.</p></li>
<li><p>Uses the <code class="docutils literal notranslate"><span class="pre">addData</span></code> method to add the computed field to the new FieldOutput object.</p></li>
<li><p>Use the following command to retrieve the example script:</p></li>
</ul>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="n">abaqus</span> <span class="n">fetch</span> <span class="n">job</span><span class="o">=</span><span class="n">fieldOperation</span>
</code></pre></div>
</div>
<p>The fetch command also retrieves an input file that you can use to generate the output database that is read by the example script.</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># FieldOutput operators example problem</span>
<span class="c1">#</span>
<span class="c1"># Script that does computations with fields and</span>
<span class="c1"># saves the results computed to the output database</span>
<span class="c1">#</span>

<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;fieldOperation.odb&#39;</span><span class="p">)</span>

<span class="c1"># Get fields from output database.</span>

<span class="n">field1</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="s1">&#39;LC1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;U&#39;</span><span class="p">]</span>
<span class="n">field2</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="s1">&#39;LC2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;U&#39;</span><span class="p">]</span>

<span class="c1"># Compute difference between fields.</span>

<span class="n">deltaDisp</span> <span class="o">=</span> <span class="n">field2</span> <span class="o">-</span> <span class="n">field1</span>

<span class="c1"># Save new field.</span>

<span class="n">newStep</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">Step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;user defined results&#39;</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span> <span class="n">TIME</span><span class="p">,</span> <span class="n">timePeriod</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">newFrame</span> <span class="o">=</span> <span class="n">newStep</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">incrementNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">frameValue</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">newField</span> <span class="o">=</span> <span class="n">newFrame</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;U&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;delta displacements&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">VECTOR</span><span class="p">)</span>
<span class="n">newField</span><span class="o">.</span><span class="n">addData</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">deltaDisp</span><span class="p">)</span>

<span class="n">odb</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div>
</div>
<h2 id="computations-with-fieldvalue-objects">Computations with FieldValue objects<a class="headerlink" href="#computations-with-fieldvalue-objects" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can use the fieldValue operators to sum and average fieldValues in a region. The example script does the following:</p>
<ul class="simple">
<li><p>Retrieves the stress field for a specified region during the last step and frame of the output database.</p></li>
<li><p>Sums all the stress fieldValues and computes the average value.</p></li>
<li><p>For each component of stress, print the sum and the average stress.</p></li>
</ul>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>sumRegionFieldValue
</code></pre></div>
</div>
<p>The fetch command also retrieves an input file that you can use to generate the output database that is read by the example script.</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="c1">#</span>
<span class="c1"># fieldValue operators example problem:</span>
<span class="c1">#</span>
<span class="c1"># sum and average stress field values in a region</span>
<span class="c1">#</span>

<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#</span>
<span class="c1"># get field</span>
<span class="c1">#</span>

<span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;sumRegionFieldValue.odb&#39;</span><span class="p">)</span>
<span class="n">endSet</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">rootAssembly</span><span class="o">.</span><span class="n">elementSets</span><span class="p">[</span><span class="s1">&#39;END1&#39;</span><span class="p">]</span>
<span class="n">field</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">]</span>
<span class="n">subField</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">getSubset</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">endSet</span><span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># sum values</span>
<span class="c1">#</span>

<span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">subField</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">val</span>
<span class="n">ave</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">subField</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># print results</span>
<span class="c1">#</span>

<span class="k">print</span> <span class="s1">&#39;Component    Sum            Average&#39;</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">componentLabels</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="p">):</span>
    <span class="k">print</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">          </span><span class="si">%5.3e</span><span class="s1">      </span><span class="si">%5.3e</span><span class="s1">&#39;</span><span class="o">%</span> \
            <span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">sum</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ave</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</code></pre></div>
</div>
<h2 id="computations-with-historyoutput-objects">Computations with HistoryOutput objects<a class="headerlink" href="#computations-with-historyoutput-objects" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can use the historyOutput operators to compute the displacement magnitude from the components. The example script does the following:</p>
<ul class="simple">
<li><p>Retrieves the node of interest using a nodeSet.</p></li>
<li><p>Uses the node of interest to construct a HistoryPoint object.</p></li>
<li><p>Uses the HistoryPoint to retrieve the historyRegion.</p></li>
<li><p>Computes the displacement magnitude history from the displacement component HistoryOutput objects in the historyRegion.</p></li>
<li><p>Scales the displacement magnitude history using a predefined value.</p></li>
<li><p>Prints the displacement magnitude history.</p></li>
</ul>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>compDispMagHist
</code></pre></div>
</div>
<p>The fetch command also retrieves an input file that you can use to generate the output database that is read by the example script.</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># HistoryOutput operators example problem.</span>
<span class="c1">#</span>
<span class="c1"># Compute magnitude of node displacement history from</span>
<span class="c1"># displacement components and scale relative to given</span>
<span class="c1"># allowable displacement.</span>
<span class="c1">#</span>

<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#</span>
<span class="c1"># get historyRegion for the node in nodeSet TIP</span>
<span class="c1">#</span>

<span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;compDispMagHist.odb&#39;</span><span class="p">)</span>
<span class="n">endSet</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">rootAssembly</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="s1">&#39;BEAM-1-1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nodeSets</span><span class="p">[</span><span class="s1">&#39;TIP&#39;</span><span class="p">]</span>
<span class="n">histPoint</span> <span class="o">=</span> <span class="n">HistoryPoint</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">endSet</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">tipHistories</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="s1">&#39;Step-2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getHistoryRegion</span><span class="p">(</span>
    <span class="n">point</span><span class="o">=</span><span class="n">histPoint</span><span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># Compute and scale magnitude.</span>
<span class="c1">#</span>

<span class="n">maxAllowableDisp</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">componentLabels</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;U1&#39;</span><span class="p">,</span> <span class="s1">&#39;U2&#39;</span><span class="p">,</span> <span class="s1">&#39;U3&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">componentLabels</span><span class="p">:</span>
   <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">power</span><span class="p">(</span><span class="n">tipHistories</span><span class="o">.</span><span class="n">historyOutputs</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span> <span class="o">/</span> <span class="n">maxAllowableDisp</span>

<span class="c1">#</span>
<span class="c1"># Print magnitude.</span>
<span class="c1">#</span>

<span class="k">print</span> <span class="s1">&#39;History:&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="o">.</span><span class="n">name</span>
<span class="k">print</span> <span class="s1">&#39;Time       Magnitude&#39;</span>
<span class="k">for</span> <span class="n">dataPair</span> <span class="ow">in</span> <span class="nb">sum</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
    <span class="k">print</span> <span class="s2">&quot;</span><span class="si">%5.4f</span><span class="s2">  </span><span class="si">%5.2f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">dataPair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dataPair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>
</div>
<h2 id="creating-a-new-load-combination-from-different-load-cases">Creating a new load combination from different load cases<a class="headerlink" href="#creating-a-new-load-combination-from-different-load-cases" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can use the frame operators to create a new load combination from existing load cases. The example script does the following:</p>
<ul class="simple">
<li><p>Retrieves the information describing the new load combination from the command line.</p></li>
<li><p>Retrieves the frames for each load case.</p></li>
<li><p>Computes the new stresses and displacements.</p></li>
<li><p>Saves data computed to the output database as a new load combination.</p></li>
</ul>
<p>The command line arguments provide the following:</p>
<ul class="simple">
<li><p><strong>odbName</strong>: The output database file name.</p></li>
<li><p><strong>stepName</strong>: The name of the step containing the load cases.</p></li>
<li><p><strong>loadCaseNames</strong>: The load case names.</p></li>
<li><p><strong>scaling</strong>: The scale factors to apply to each load case.</p></li>
</ul>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>createLoadComb
</code></pre></div>
</div>
<p>The fetch command also retrieves an input file that you can use to generate an output database that can be read by the example script.</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># retrieve request from user</span>
<span class="n">odbName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter odb name&#39;</span><span class="p">)</span>
<span class="n">stepName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter step name&#39;</span><span class="p">)</span>

<span class="n">loadCaseNames</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span>
    <span class="s1">&#39;Enter new load case as:</span>
    <span class="p">[</span><span class="s1">&#39;loadCase1Name&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&#39;loadCaseNName&#39;</span><span class="p">]</span><span class="s1">&#39;))</span>
<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">loadCaseNames</span><span class="p">)</span> <span class="o">==</span> <span class="n">types</span><span class="o">.</span><span class="n">TupleType</span><span class="p">:</span>
    <span class="n">loadCaseNames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">loadCaseNames</span><span class="p">)</span>
<span class="n">lcName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter new load case name&#39;</span><span class="p">)</span>
<span class="n">scaling</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span>
    <span class="s1">&#39;Enter new load case as:(scaleFactor1, .., scaleFactorN)&#39;</span><span class="p">))</span>

<span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">odbName</span><span class="p">)</span>
<span class="n">step</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="n">stepName</span><span class="p">]</span>

<span class="c1"># compute new load case</span>
<span class="n">newStress</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">newDisp</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">loadCaseName</span> <span class="ow">in</span> <span class="n">loadCaseNames</span><span class="p">:</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">getFrame</span><span class="p">(</span><span class="n">loadCase</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">loadCases</span><span class="p">[</span><span class="n">loadCaseName</span><span class="p">])</span>
    <span class="n">scaleFac</span> <span class="o">=</span> <span class="n">scaling</span><span class="p">[</span><span class="n">loadCaseNames</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">loadCase</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
    <span class="n">newStress</span> <span class="o">=</span> <span class="n">newStress</span> <span class="o">+</span> <span class="n">scaleFac</span><span class="o">*</span><span class="n">frame</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">]</span>
    <span class="n">newDisp</span> <span class="o">=</span> <span class="n">newDisp</span> <span class="o">+</span> <span class="n">scaleFac</span><span class="o">*</span><span class="n">frame</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;U&#39;</span><span class="p">]</span>

<span class="c1"># save new load case to odb</span>
<span class="n">lcNew</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">LoadCase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">lcName</span><span class="p">)</span>
<span class="n">newFrame</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">loadCase</span><span class="o">=</span><span class="n">lcNew</span><span class="p">)</span>
<span class="n">newFrame</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">newStress</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="n">newFrame</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">newDisp</span><span class="p">)</span>

<span class="n">odb</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">odb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
</div>
<h2 id="stress-range-for-multiple-load-cases">Stress range for multiple load cases<a class="headerlink" href="#stress-range-for-multiple-load-cases" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can use the envelope operations to compute the stress range over a number of load cases. The example script does the following:</p>
<ul class="simple">
<li><p>For each load case during a specified step, the script collects the S11 components of the stress tensor fields into a list of scalar fields.</p></li>
<li><p>Computes the maximum and minimum of the S11 stress component using the envelope calculations.</p></li>
<li><p>Computes the stress range using the maximum and minimum values of the stress component.</p></li>
<li><p>Creates a new frame in the step.</p></li>
<li><p>Writes the computed stress range into a new FieldOutput object in the new frame.</p></li>
</ul>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>stressRange
</code></pre></div>
</div>
<p>The fetch command also retrieves an input file that you can use to generate an output database that can be read by the example script.</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># retrieve request from user</span>
<span class="n">odbName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter odb name&#39;</span><span class="p">)</span>
<span class="n">stepName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter step name&#39;</span><span class="p">)</span>

<span class="c1"># retrieve steps from the odb</span>
<span class="n">odb</span><span class="o">=</span><span class="n">openOdb</span><span class="p">(</span><span class="n">odbName</span><span class="p">)</span>
<span class="n">step</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="n">stepName</span><span class="p">]</span>
<span class="n">sFields</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">loadCase</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">loadCases</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">stressField</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">getFrame</span><span class="p">(</span><span class="n">loadCase</span><span class="o">=</span><span class="n">loadCase</span><span class="p">)</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">]</span>
    <span class="n">sFields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stressField</span><span class="o">.</span><span class="n">getScalarField</span><span class="p">(</span><span class="n">componentLabel</span><span class="o">=</span><span class="s1">&#39;S11&#39;</span><span class="p">))</span>

<span class="c1"># compute stress range</span>
<span class="n">maxStress</span><span class="p">,</span> <span class="n">maxLoc</span> <span class="o">=</span> <span class="n">maxEnvelope</span><span class="p">(</span><span class="n">sFields</span><span class="p">)</span>
<span class="n">minStress</span><span class="p">,</span> <span class="n">minLoc</span> <span class="o">=</span> <span class="n">minEnvelope</span><span class="p">(</span><span class="n">sFields</span><span class="p">)</span>

<span class="n">stressRange</span> <span class="o">=</span> <span class="n">maxStress</span> <span class="o">-</span> <span class="n">minStress</span>

<span class="c1"># save to same step</span>
<span class="n">newFrame</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">incrementNumber</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">frameValue</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Stress Range&#39;</span><span class="p">)</span>
<span class="n">newFrame</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">stressRange</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;S11 Range&#39;</span><span class="p">)</span>

<span class="n">odb</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">odb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
</div>
<h2 id="transformation-of-field-results"><span id="id3"></span>Transformation of field results<a class="headerlink" href="#transformation-of-field-results" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how field results can be transformed to a different coordinate system. The example computes deviation of the nodal displacements with respect to a perfectly cylindrical displacement (cylinder bore distortion). The example does the following:</p>
<ul class="simple">
<li><p>Creates a cylindrical coordinate system.</p></li>
<li><p>Transforms the results to the new coordinate system.</p></li>
<li><p>Computes the average radial displacement.</p></li>
<li><p>Computes the distortion as the difference between radial displacement and the average radial displacement.</p></li>
<li><p>Saves the distortion field to the output database for viewing.</p></li>
</ul>
<p>Use the following commands to retrieve the example script and an input file to create a sample output database:</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># abaqus fetch job=transformExa</span>
<span class="c1"># abaqus fetch job=esf4sxdg</span>
<span class="kn">from</span> <span class="nn">odbAccess</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Retrieve request from user.</span>

<span class="n">odbName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter odb name&#39;</span><span class="p">)</span>
<span class="n">stepName</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter step name&#39;</span><span class="p">)</span>
<span class="n">frameNo</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Enter frame number&#39;</span><span class="p">)</span> <span class="p">)</span>


<span class="n">odb</span> <span class="o">=</span> <span class="n">openOdb</span><span class="p">(</span><span class="n">odbName</span><span class="p">)</span>

<span class="c1"># Retrieve the displacements from last frame of the last step.</span>

<span class="n">step</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="n">stepName</span><span class="p">]</span>
<span class="n">frame</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">frameNo</span><span class="p">]</span>
<span class="n">displacement</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">fieldOutputs</span><span class="p">[</span><span class="s1">&#39;U&#39;</span><span class="p">]</span>

<span class="c1"># Create cylindrical coordinate system and compute</span>
<span class="c1"># associated results</span>

<span class="n">coordSys</span> <span class="o">=</span> <span class="n">odb</span><span class="o">.</span><span class="n">rootAssembly</span><span class="o">.</span><span class="n">DatumCsysByThreePoints</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;cylC&#39;</span><span class="p">,</span>
    <span class="n">coordSysType</span><span class="o">=</span><span class="n">CYLINDRICAL</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
    <span class="n">point1</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">point2</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">)</span>

<span class="n">cylindricalDisp</span> <span class="o">=</span> <span class="n">displacement</span><span class="o">.</span><span class="n">getTransformedField</span><span class="p">(</span>
    <span class="n">datumCsys</span><span class="o">=</span><span class="n">coordSys</span><span class="p">)</span>
<span class="n">radialDisp</span> <span class="o">=</span> <span class="n">cylindricalDisp</span><span class="o">.</span><span class="n">getScalarField</span><span class="p">(</span><span class="n">componentLabel</span><span class="o">=</span><span class="s1">&#39;U1&#39;</span><span class="p">)</span>

<span class="c1"># Compute average radius.</span>

<span class="nb">sum</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">radialDisp</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">val</span><span class="o">.</span><span class="n">data</span>
<span class="n">aveDisp</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">radialDisp</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="c1"># Compute distortion.</span>

<span class="n">distortion</span> <span class="o">=</span> <span class="n">radialDisp</span> <span class="o">-</span> <span class="n">aveDisp</span>

<span class="c1"># Save computed results to the database.</span>

<span class="n">frame</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">radialDisp</span><span class="p">)</span>
<span class="n">fieldDescription</span> <span class="o">=</span> <span class="s1">&#39;Distortion ( </span><span class="se">\</span>
<span class="s1">    average radial displacement = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aveDisp</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
<span class="n">frame</span><span class="o">.</span><span class="n">FieldOutput</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Distortion&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="n">fieldDescription</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">distortion</span><span class="p">)</span>

<span class="n">odb</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">odb</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
</div>
<h2 id="viewing-the-analysis-of-a-meshed-beam-cross-section">Viewing the analysis of a meshed beam cross-section<a class="headerlink" href="#viewing-the-analysis-of-a-meshed-beam-cross-section" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can view the results of a meshed beam cross-section analysis that was generated using Timoshenko beams, as described in <a class="reference external" href="https://help.3ds.com/2021/English/DSSIMULIA_Established/SIMACAEANLRefMap/simaanl-c-meshedsection.htm?contextscope=all">Meshed beam cross-sections</a>. Before you execute the example script, you must run two analyses that create the following output database files:</p>
<ul class="simple">
<li><p>An output database generated by the two-dimensional cross-section analysis. The script reads cross-section data, including the out-of-plane warping function, from this output database.</p></li>
<li><p>An output database generated by the beam analysis. The script reads generalized section strains (SE) from this output database.</p></li>
</ul>
<p>Use the following command to retrieve the example script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>compositeBeam
</code></pre></div>
</div>
<p>You must run the script from Abaqus/CAE by selecting <strong>File -&gt; Run Script</strong> from the main menu. The script uses <code class="docutils literal notranslate"><span class="pre">getInputs</span></code> to display a dialog box that prompts you for the name of the output databases generated by the two-dimensional cross-section analysis and by the beam analysis. The names are case-insensitive, and you can omit the <code class="docutils literal notranslate"><span class="pre">.odb</span></code> file suffix. The files must be in the local directory. The dialog box also prompts you for the following:</p>
<ul class="simple">
<li><p>The name of the step</p></li>
<li><p>The increment or mode number (for a frequency analysis)</p></li>
<li><p>The name of the load case (if any)</p></li>
<li><p>The name of the part instance</p></li>
<li><p>The element number</p></li>
<li><p>The integration point number</p></li>
</ul>
<p>If you do not enter a value in a field, the script looks in the beam analysis output database for possible values. The script then enters a default value in the dialog box and displays information about the range of possible values in the Abaqus/CAE message area. You can leave the load case field blank if the analysis did not include load cases. The script does not continue until all the values in the dialog box are acceptable. The same values are written to a file called <code class="docutils literal notranslate"><span class="pre">compositeBeam_values.dat</span></code> in the local directory, and these values appear as defaults in the dialog box the next time you run the example script.</p>
<p>After the <code class="docutils literal notranslate"><span class="pre">getInputs</span></code> method returns acceptable values, the script reads the two output databases and writes the generated data back to the output database created by the two-dimensional cross-section analysis. If the beam cross-section mesh consists of 1-DOF warping elements, the script then displays an undeformed contour plot of S11 and uses the getInputs method again to display a dialog box with a list of the available stress and strain components (S11, S22, S33, E11, E22, and E33). If the beam cross-section mesh consists of 3-DOF warping elements, the deformed contour plot is displayed, and the full three-dimensional stress and strain components (S11, S22, S33, S12, S13, S23, E11, E22, E33, E12, E13, and E23) are available. The deformation represents the in-plane and out-of-plane warping. Click <strong>OK</strong> in this dialog box to cycle through the available components. Click Cancel to end the script. You can also select the component to display by starting the Visualization module and selecting <code class="docutils literal notranslate"><span class="pre">Result</span> <span class="pre">-&gt;</span> <span class="pre">Field</span> <span class="pre">Output</span></code> from the main menu.</p>
<p>The example script writes new stress and strain fields. The script must provide a unique name for the generated field output because each of these fields is generated for a specific beam analysis output database and for a specific part instance, step, frame, element, and integration point. The script constructs this unique name as follows:</p>
<ul class="simple">
<li><p>All contour stress and strain fields for a specific beam analysis output database are written to a new frame, where the description of the frame is the name of the output database. For example, for a beam analysis output database called <code class="docutils literal notranslate"><span class="pre">beam_run17.odb</span></code>, the frame description is <strong>Beam ODB: beam_run17</strong>.</p></li>
<li><p>The field name is assembled from a concatenation of the <strong>step name</strong>, <strong>frame index</strong>, <strong>instance name</strong>, <strong>element</strong>, and <strong>integration point</strong>, followed by E or S. For example, <code class="docutils literal notranslate"><span class="pre">Step-1_4_LINEARMESHED_12_1_E</span></code>. Any spaces in a step or instance name are replaced by underscores.</p></li>
</ul>
<p>You can run the script many times; for example, to create contour data for a particular step, increment, and integration point along each element of the beam. In this case you would also use <strong>Result -&gt; Field Output</strong> to select which element to display.</p>
<p>The contour data generated by the example script are written back to the output database that was originally created by the two-dimensional, cross-section analysis. If you want to preserve this database in its original form, you must save a copy before you run the example script.</p>
<h2 id="using-infinite-elements-to-compute-and-view-the-results-of-an-acoustic-far-field-analysis">Using infinite elements to compute and view the results of an acoustic far-field analysis<a class="headerlink" href="#using-infinite-elements-to-compute-and-view-the-results-of-an-acoustic-far-field-analysis" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates how you can use the Abaqus Scripting Interface to compute acoustic far-field pressure values from infinite element sets and project the results onto a spherical surface for visualization purposes. This script is designed primarily to compute the acoustic far-field pressure using a layer of infinite acoustic elements that forms a full or partial spherical surface. The script extends the acoustic analysis functionality within Abaqus/Standard, as described in <a class="reference external" href="https://help.3ds.com/2021/English/DSSIMULIA_Established/SIMACAEANLRefMap/simaanl-c-acoustic.htm?contextscope=all">Acoustic, shock, and coupled acoustic-structural analysis</a> and <a class="reference external" href="https://help.3ds.com/2021/English/DSSIMULIA_Established/SIMACAEELMRefMap/simaelm-c-infinite.htm?contextscope=all">Infinite elements</a>. The script writes the acoustic far-field pressure values to an output database, and you can use Abaqus/CAE to view the far-field results.</p>
<p>The far-field pressure is defined as</p>
<p>$$
\lim _{r \rightarrow \infty} p(r)=\lim <em>{r \rightarrow \infty}\left(\frac{1}{k r} e^{-i k r} p</em>{F A R}\right)
$$</p>
<p>where $p(r)$ is the acoustic pressure at a distance $r$ from the reference point, $k$ is the wave number, and $p_{F A R}$ is the acoustic far-field pressure. The acoustic pressure decibel value is defined as</p>
<p>$$
&amp;\mathrm{PORdB}=20 \log <em>{10}\left(\frac{p</em>{R M S}}{d B R e f}\right) \
&amp;p_{R M S}=\left(\frac{|\mathrm{POR}|}{\sqrt{2}}\right)
$$</p>
<p>where $|\mathrm{POR}|$ is the magnitude of the acoustic pressure at a point, $p_{R M S}$ is the root mean square acoustic pressure, and $d B R e f$ is the decibel reference value given as user input. The far-field pressure decibel value is defined in the same manner as $\operatorname{POR} d B$, using the same reference value $d B R e f)$</p>
<div class="note admonition">
<p class="admonition-title">备注</p>
<p>If $d B R e f=20 \mu P a$ (in SI units), POR $d B$ corresponds to $d B S P L$</p>
</div>
<p>The script also calculates the far-field acoustic intensity, which is defined as</p>
<p>$$
\mathrm{INTEN}<em>{\mathrm{FAR}}=\left(\frac{p</em>{R M S F A R}^{2}}{\rho\times c}\right)
$$</p>
<p>where $p_{R M S F A R}$ is the far-field rms pressure, $\rho$ is the fluid density, and $c$ is the speed of sound in the medium.</p>
<p>Before you execute the script, you must run a direct-solution, steady-state dynamics acoustics analysis that includes three-dimensional acoustic infinite elements (ACIN3D3, ACIN3D4, ACIN3D6, and ACIN3D8). In addition, the output database must contain results for the following output variables:</p>
<ul class="simple">
<li><p>INFN, the acoustic infinite element normal vector.</p></li>
<li><p>INFR, the acoustic infinite element “radius,” used in the coordinate map for these elements.</p></li>
<li><p>PINF, the acoustic infinite element pressure coefficients.</p></li>
</ul>
<p>Use the following command to retrieve the script:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>acousticVisualization
</code></pre></div>
</div>
<p>Enter the Visualization module, and display the output database in the current viewport. Run the script by selecting <strong>File -&gt; Run Script</strong> from the main menu bar.</p>
<p>The script uses getInputs to display a dialog box that prompts you for the following information:</p>
<ul>
<li><p>The name of the element set containing the infinite elements (the name is case sensitive). By default, the script locates all the infinite elements in the model and uses them to create the spherical surface. If the script cannot find the specified element set in the output database, it displays a list of the available element sets in the message area.</p></li>
<li><p>The radius of the sphere (required). The script asks you to enter a new value if the sphere with this radius does not intersect any of the selected infinite elements.</p></li>
<li><p>The coordinates of the center of the sphere. By default, the script uses (0,0,0).</p></li>
<li><p>The analysis steps. You can enter one of the following:</p>
<ul class="simple">
<li><p>An Int</p></li>
<li><p>A comma-separated list of Ints</p></li>
<li><p>A range; for example, 1:20</p></li>
</ul>
<p>You can also enter a combination of Ints and ranges; for example, 4,5,10:20,30. By default, the script reads data from all the steps. The script ignores any steps that do not perform a direct-solution, steady-state dynamics acoustics analysis or that have no results.</p>
</li>
<li><p>The frequencies for which output should be generated (Hz). You can enter a Float, a list of Floats, or a range. By default, the script generates output for all the frequencies in the original output database.</p></li>
<li><p>A decibel reference value (required).</p></li>
<li><p>The name of the part instance to create (required). The script appends this name to the name of the instance containing the infinite elements being used.</p></li>
<li><p>The speed of sound (required).</p></li>
<li><p>The fluid density (required)</p></li>
<li><p>Whether to write data to the original output database. By default, the script writes to an output database called <code class="docutils literal notranslate"><span class="pre">current-odb-name_acvis.odb</span></code>.</p></li>
</ul>
<p>After the <code class="docutils literal notranslate"><span class="pre">getInputs</span></code> method returns acceptable values, the script processes the elements in the specified element sets. The visualization sphere is then determined using the specified radius and center. For each element in the infinite element sets, the script creates a corresponding membrane element such that the new element is a projection of the old element onto the surface of the sphere. The projection uses the infinite element reference point and the internally calculated infinite direction normal (INFN) at each node of the element.</p>
<p>Once the new display elements have been created, the script writes results at the nodes in the set. The following output results are written back to the output database:</p>
<ul class="simple">
<li><p>POR, the acoustic pressure.</p></li>
<li><p>PORdB, the acoustic pressure decibel value. If the reference value used is $2\times10^{-5}$ Pa, the PFARdB corresponds to dB SPL.</p></li>
<li><p>PFAR, the acoustic far-field pressure.</p></li>
<li><p>PFARdB, the far-field pressure decibel value.</p></li>
<li><p>INTEN_FAR, the far-field acoustic intensity.</p></li>
</ul>
<p>To create the output at each node, the script first determines the point at which the node ray intersects the sphere. Using the distance from the reference point to the intersection point and the element shape functions, the required output variables are calculated at the intersection point.</p>
<p>After the script has finished writing data, it opens the output database containing the new data. For comparison, the original instance is displayed along with the new instance, but results are available only for the new instance. However, if you chose to write the results back to the original output database, the original instance and the new instance along with the original results and the new results can be displayed side-by-side. The script displays any error, warning, or information messages in the message area.</p>
<p>You can run the script more than once and continue writing data to the same output database. For example, you can run the script several times to look at the far-field pressures at various points in space, and results on several spheres will be written to the output database.</p>
<p>To see how the script operates on a single triangular-element model, use the following command to retrieve the input file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span>fetch<span class="w"> </span><span class="nv">job</span><span class="o">=</span>singleTriangularElementModel
</code></pre></div>
</div>
<p>Use the following command to create the corresponding output database:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><code>abaqus<span class="w"> </span><span class="nv">job</span><span class="o">=</span>singleTriangularElementModel
</code></pre></div>
</div>
<p>The results from running the script twice using the single triangular-element model, changing the radius of the sphere, and writing the data back to the original output database are shown in <a class="hxr-hoverxref hxr-tooltip reference internal" href="#cmd-odb-api-acousticviz"><span class="std std-numref">图 30</span></a></p>
<figure class="align-center" id="id4">
<span id="cmd-odb-api-acousticviz"></span><a class="reference internal image-reference" href="../../../_images/cmd-odb-api-acousticviz.png"><img alt="../../../_images/cmd-odb-api-acousticviz.png" src="../../../_images/cmd-odb-api-acousticviz.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-number">图 30 </span><span class="caption-text"><span class="caption-text">
Displaying the acoustic pressure on several spheres.</span><a class="headerlink" href="#id4" title="此图像的永久链接">¶</a></figcaption>
</figure>
<p>This model simulates the response of a sphere in “breathing” mode (a uniform radial expansion/compression mode). The model consists of one triangular ACIN3D3 element. Each node of the element is placed on a coordinate axis at a distance of $1.0$ from the origin that serves as the reference point for the infinite element. The acoustic material properties do not have physical significance; the values used are for convenience only. The loading consists of applying an in-phase pressure boundary condition to all the nodes. Under this loading and geometry, the model behaves as a spherical source (an acoustic monopole) radiating in the radial direction only. The acoustic pressure, $p$, and the acoustic far-field pressure, $p_{F A R}$, at a distance $r$ from the center of the sphere are</p>
<p>$$
p(r)=p_{0}\left(\frac{r_{0}}{r}\right) e^{-i k\left(r-r_{0}\right)}
$$</p>
<p>and</p>
<p>$$
p_{F A R}(r)=p_{0} r_{0} k e^{i k r_{0}}
$$</p>
<p>where $p_{0}$ is the known acoustic pressure at some reference distance $r_{0}$ and $k$ is the wave number.</p>
<p>For this single-element example, you should enter a value of $1.0$ for the speed of sound; thus, $k=2 \pi f$, where $f$ is the frequency in $\mathrm{Hz}$. $r_{0}$ in this model is 1 , and $p_{0}$ is $0.001$. The equations for the acoustic pressure, $p$, and the acoustic far-field pressure, $p_{F A R}$, reduce to</p>
<p>$$
p(r)=\frac{0.001}{r} e^{-i k(r-1)}
$$</p>
<p>and</p>
<p>$$
p_{F A R}(r)=0.001 k e^{i k}.
$$</p>
<h2 id="an-abaqus-scripting-interface-version-of-felbow">An Abaqus Scripting Interface version of FELBOW<a class="headerlink" href="#an-abaqus-scripting-interface-version-of-felbow" title="此标题的永久链接">¶</a></h2>
<p>This example illustrates the use of an Abaqus Scripting Interface script to read selected element integration point records from an output database and to postprocess the elbow element results. The script creates X–Y data that can be plotted with the X–Y plotting capability in Abaqus/CAE. The script performs the same function as the Fortran program described in <a class="reference external" href="https://help.3ds.com/2021/English/DSSIMULIA_Established/SIMACAEEXARefMap/simaexa-c-felbow.htm?contextscope=all">Creation of a data file to facilitate the postprocessing of elbow element results: FELBOW</a>.</p>
<p>The script reads integration point data for elbow elements from an output database to visualize one of the following:</p>
<ol class="arabic simple">
<li><p>Variation of an output variable around the circumference of a given elbow element, or</p></li>
<li><p>Ovalization of a given elbow element.</p></li>
</ol>
<p>The script creates either an ASCII file containing <strong>X - Y</strong> data or a new output database file that can be viewed using Abaqus/CAE.</p>
<p>To use option 2, you must ensure that the integration point coordinates (COORD) are written to the output database. For option 1 the <strong>X</strong> - data are data for the distance around the circumference of the elbow element, measured along the middle surface, and the <strong>Y</strong> - data are data for the output variable. For option 2 the <strong>X - Y</strong> data are the current coordinates of the middle-surface integration points around the circumference of the elbow element, projected to a local coordinate system in the plane of the deformed cross-section. The origin of the local system coincides with the center of the cross-section; the plane of the deformed cross-section is defined as the plane that contains the center of the cross-section.</p>
<p>You should specify the name of the output database during program execution. The script prompts for more information, depending on the option that was chosen; this information includes the following:</p>
<ul class="simple">
<li><p>Your choice for storing results (ASCII file or a new output database)</p></li>
<li><p>File name based on the above choice</p></li>
<li><p>The postprocessing option (1 or 2)</p></li>
<li><p>The part name</p></li>
<li><p>The step name</p></li>
<li><p>The frame number</p></li>
<li><p>The element output variable (option 1 only)</p></li>
<li><p>The component of the variable (option 1 only)</p></li>
<li><p>The section point number (option 1 only)</p></li>
<li><p>The element number or element set name</p></li>
</ul>
<p>Before executing the script, run an analysis that creates an output database file containing the appropriate output. This analysis includes, for example, output for the elements and the integration point coordinates of the elements. Execute the script using the following command:</p>
<div class="highlight-python2 notranslate"><div class="highlight"><pre><span></span><code><span class="n">abaqus</span> <span class="n">python</span> <span class="n">felbow</span><span class="o">.</span><span class="n">py</span> <span class="o">&lt;</span><span class="n">filename</span><span class="o">.</span><span class="n">odb</span><span class="o">&gt;</span>
</code></pre></div>
</div>
<p>The script prompts for other information, such as the desired postprocessing option, part name, etc. The script processes the data and produces a text file or a new output database that contains the information required to visualize the elbow element results.</p>
<p><a class="reference external" href="https://help.3ds.com/2021/English/DSSIMULIA_Established/SIMACAEEXARefMap/simaexa-c-elbowcollapse.htm?contextscope=all">Elastic-plastic collapse of a thin-walled elbow under in-plane bending and internal pressure</a> contains several figures that can be created with the aid of this program.</p>






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="improve-efficiency.html" class="md-footer__link md-footer__link--prev" aria-label="上一页: Improving the efficiency of your scripts" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Improving the efficiency of your scripts
            </div>
          </div>
        </a>
      
      
        
        <a href="../cpp/index.html" class="md-footer__link md-footer__link--next" aria-label="下一页: Using C++ to access an output database" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              Using C++ to access an output database
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2022, WANG Hailin.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    6.2.1.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/haiiliin/abqpy" target="_blank" rel="noopener" title="Source on github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://pypi.org/project/abqpy" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.tabs", "navigation.sections", "navigation.top", "search.share", "toc.follow", "toc.sticky", "content.tabs.link", "announce.dismiss"], "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike", "staticVersions": [{"aliases": [], "title": "2023", "version": "/abqpy/zh_CN/2023"}, {"aliases": [], "title": "2022", "version": "/abqpy/zh_CN/2022"}, {"aliases": [], "title": "2021", "version": "/abqpy/zh_CN/2021"}, {"aliases": [], "title": "2020", "version": "/abqpy/zh_CN/2020"}, {"aliases": [], "title": "2019", "version": "/abqpy/zh_CN/2019"}, {"aliases": [], "title": "2018", "version": "/abqpy/zh_CN/2018"}, {"aliases": [], "title": "2017", "version": "/abqpy/zh_CN/2017"}, {"aliases": [], "title": "2016", "version": "/abqpy/zh_CN/2016"}], "versionPath": null}}</script>
    
      
        <script src="../../../_static/sphinx_immaterial_theme.1b5b7a2d5891aec19.min.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script src="../../../_static/js/hoverxref.js"></script>
        <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../_static/js/micromodal.min.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../_static/togglebutton.js"></script>
        <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "haiiliin/abqpy");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "💬 comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
        <script src="../../../_static/translations.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script src="../../../_static/design-tabs.js"></script>
        <script id="MathJax-script" src="../../../_static/mathjax/tex-mml-chtml.js"></script>
    
  </body>
</html>